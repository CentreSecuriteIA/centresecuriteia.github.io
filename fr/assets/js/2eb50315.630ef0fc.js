"use strict";(self.webpackChunkatlas=self.webpackChunkatlas||[]).push([[5198],{5742:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"chapters/09/3","title":"M\xe9thodes d\'intervention","description":"Activation Patching","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/chapters/09/03.md","sourceDirName":"chapters/09","slug":"/chapters/09/03","permalink":"/fr/chapters/09/03","draft":false,"unlisted":false,"editUrl":"https://github.com/markov-root/atlas/edit/main/docs/chapters/09/03.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"3","title":"M\xe9thodes d\'intervention","sidebar_label":"9.3 M\xe9thodes d\'intervention","sidebar_position":4,"slug":"/chapters/09/03","reading_time_core":"3 min","reading_time_optional":"5 min","pagination_prev":"chapters/09/2","pagination_next":"chapters/09/4"},"sidebar":"docs","previous":{"title":"9.2 M\xe9thodes d\'observation","permalink":"/fr/chapters/09/02"},"next":{"title":"9.4 Automatiser et mettre \xe0 l\'\xe9chelle l\'interpr\xe9tabilit\xe9","permalink":"/fr/chapters/09/04"}}');var s=t(4848),r=t(8453),a=t(3931),o=(t(2482),t(8559)),l=(t(9585),t(2501));const d={id:3,title:"M\xe9thodes d'intervention",sidebar_label:"9.3 M\xe9thodes d'intervention",sidebar_position:4,slug:"/chapters/09/03",reading_time_core:"3 min",reading_time_optional:"5 min",pagination_prev:"chapters/09/2",pagination_next:"chapters/09/4"},c="M\xe9thodes interventionnelles",u={},p=[{value:"Activation Patching",id:"01",level:2},{value:"Pilotage des activations",id:"02",level:2}];function m(e){const n={a:"a",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{GlossaryTerm:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("GlossaryTerm",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"m\xe9thodes-interventionnelles",children:"M\xe9thodes interventionnelles"})}),"\n",(0,s.jsx)(n.h2,{id:"01",children:"Activation Patching"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"L'activation patching est une technique utilis\xe9e pour comprendre et identifier les parties sp\xe9cifiques d'un mod\xe8le responsables de certains comportements ou r\xe9sultats."}),' Par exemple, lorsque vous demandez \xe0 un LLM de compl\xe9ter la phrase : "Quand Jean et Marie sont all\xe9s au magasin, Jean a donn\xe9 une bouteille \xe0", comment le mod\xe8le sait-il qu\'il doit r\xe9pondre "Marie" plut\xf4t que "Jean" ou un autre nom ? Cette compl\xe9tion n\xe9cessite que le mod\xe8le suive qui est le destinataire de l\'action, ce qui signifie qu\'il doit comprendre et stocker les r\xf4les contextuels (c\'est-\xe0-dire qui donne et qui re\xe7oit).']}),"\n",(0,s.jsxs)(n.p,{children:["Les chercheurs ont utilis\xe9 l'activation patching pour d\xe9couvrir quelles parties du mod\xe8le sont responsables de ce type d'attribution de r\xf4les. Plus pr\xe9cis\xe9ment, l'objectif est d'identifier le circuit (c'est-\xe0-dire le groupe de neurones et de connexions) qui aide le mod\xe8le \xe0 d\xe9cider que \"Marie\" est la bonne r\xe9ponse (",(0,s.jsx)(n.a,{href:"https://openreview.net/forum?id=NpsVSN6o4ul",children:"Wang et al., 2023"}),")."]}),"\n",(0,s.jsxs)(o.A,{title:"D\xe9tail - Correctif d'Activation",collapsed:!0,children:[(0,s.jsxs)(n.p,{children:["Pour illustrer le processus d'activation patching, consid\xe9rons la figure ci-dessous (",(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2404.15255",children:"Heimersheim & Nanda, 2024"}),'). Supposons que nous voulions comprendre comment un mod\xe8le compl\xe8te la phrase "Quand Jean et Marie sont all\xe9s au magasin, Jean a donn\xe9 une bouteille \xe0" et quels composants sont impliqu\xe9s dans le choix de "Marie" comme r\xe9ponse. L\'activation patching n\xe9cessite g\xe9n\xe9ralement trois \xe9tapes :']}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Entr\xe9e propre :"}),' \xc0 gauche, le mod\xe8le traite la phrase "Jean et Marie sont all\xe9s au magasin, Jean a donn\xe9 une bouteille \xe0" g\xe9n\xe9rant une s\xe9rie d\'activations (sorties de chaque couche) montr\xe9es en vert. Cette entr\xe9e propre fournit au mod\xe8le le contexte correct pour interpr\xe9ter "Jean" comme le donneur et "Marie" comme la destinataire. Le mod\xe8le pr\xe9dit "Marie".']}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Entr\xe9e corrompue :"}),' \xc0 droite, le mod\xe8le re\xe7oit une entr\xe9e corrompue : "Bob et Marie sont all\xe9s au magasin, Jean a donn\xe9 une bouteille \xe0". Dans ce cas, les activations (en rouge) seront diff\xe9rentes car le mod\xe8le traite maintenant "Bob" au lieu de "Jean". Ici, il y a une ambigu\xeft\xe9 sur le fait que "Marie" ou "Jean" soit le destinataire pr\xe9vu, donc la r\xe9ponse ne sera pas n\xe9cessairement "Marie".']}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Processus de patching :"}),' L\'activation patching implique de prendre des activations sp\xe9cifiques de l\'entr\xe9e propre "Jean et Marie..." et de les substituer dans l\'entr\xe9e corrompue "Bob et Marie...". Ceci est indiqu\xe9 par la fl\xe8che. En patchant les activations de l\'entr\xe9e propre, nous pouvons tester si la compr\xe9hension du mod\xe8le de "Jean" comme donneur et "Marie" comme destinataire peut \xeatre restaur\xe9e, m\xeame lorsque l\'entr\xe9e corrompue avec "Bob" cr\xe9e une ambigu\xeft\xe9. \xc0 cette \xe9tape, nous observons \xe0 quel point la pr\xe9diction du mod\xe8le se d\xe9place vers "Marie". Par exemple, si le patching des activations d\'une t\xeate d\'',(0,s.jsx)(t,{term:"attention",definition:'{"definition":"M\xe9canisme permettant aux mod\xe8les de se concentrer sur les parties pertinentes de l\'entr\xe9e lors de la r\xe9alisation de pr\xe9dictions, en calculant des combinaisons pond\xe9r\xe9es d\'\xe9l\xe9ments d\'entr\xe9e..","source":"[Bahdanau et al., 2015](https://arxiv.org/abs/1409.0473)","aliases":["Attention","attention mechanism","self-attention"]}',children:(0,s.jsx)(t,{term:"attention",definition:'{"definition":"M\xe9canisme permettant aux mod\xe8les de se concentrer sur les parties pertinentes de l\'entr\xe9e lors de la r\xe9alisation de pr\xe9dictions, en calculant des combinaisons pond\xe9r\xe9es d\'\xe9l\xe9ments d\'entr\xe9e..","source":"[Bahdanau et al., 2015](https://arxiv.org/abs/1409.0473)","aliases":["Attention","attention mechanism","self-attention"]}',children:"attention"})}),' sp\xe9cifique augmente le logit pour "Marie", cela sugg\xe8re que cette t\xeate est une partie importante du circuit responsable de la t\xe2che.']}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["It\xe9rer cette proc\xe9dure sur diff\xe9rentes couches et composants (comme les t\xeates d'",(0,s.jsx)(t,{term:"attention",definition:'{"definition":"M\xe9canisme permettant aux mod\xe8les de se concentrer sur les parties pertinentes de l\'entr\xe9e lors de la r\xe9alisation de pr\xe9dictions, en calculant des combinaisons pond\xe9r\xe9es d\'\xe9l\xe9ments d\'entr\xe9e..","source":"[Bahdanau et al., 2015](https://arxiv.org/abs/1409.0473)","aliases":["Attention","attention mechanism","self-attention"]}',children:(0,s.jsx)(t,{term:"attention",definition:'{"definition":"M\xe9canisme permettant aux mod\xe8les de se concentrer sur les parties pertinentes de l\'entr\xe9e lors de la r\xe9alisation de pr\xe9dictions, en calculant des combinaisons pond\xe9r\xe9es d\'\xe9l\xe9ments d\'entr\xe9e..","source":"[Bahdanau et al., 2015](https://arxiv.org/abs/1409.0473)","aliases":["Attention","attention mechanism","self-attention"]}',children:"attention"})})," ou les MLP) permet aux chercheurs d'identifier les composants les plus responsables du comportement cible."]}),"\n"]}),"\n"]}),(0,s.jsx)(l.A,{src:"./img/hpl_Image_22.png",alt:"Entrer la description alternative de l'image",number:"22",label:"9.22",caption:"Une illustration du processus de correctif d'activation. \xc0 gauche, le mod\xe8le traite une s\xe9quence d'entr\xe9e propre \"John et Mary\", avec des activations repr\xe9sent\xe9es en vert. \xc0 droite, le mod\xe8le traite une s\xe9quence d'entr\xe9e corrompue \"Bob et Mary\", avec des activations repr\xe9sent\xe9es en rouge. Le correctif d'activation consiste \xe0 remplacer une ou plusieurs activations dans la s\xe9quence corrompue par les activations correspondantes de la s\xe9quence propre (indiqu\xe9 par la fl\xe8che). Les activations corrig\xe9es sont ensuite transmises pour observer comment elles affectent les logits de sortie du mod\xe8le. En analysant si les activations corrig\xe9es restaurent la sortie souhait\xe9e, les chercheurs peuvent identifier quelles parties des activations du mod\xe8le sont responsables de comportements ou de sorties sp\xe9cifiques. D'apr\xe8s ([Zhang & Nanda, 2023](https://arxiv.org/abs/2309.16042))."}),(0,s.jsx)(l.A,{src:"./img/kdG_Image_23.png",alt:"Entrer la description alternative de l'image",number:"23",label:"9.23",caption:"Les neurones et les connexions en rouge repr\xe9sentent les composants les plus importants de GPT-2 small pour compl\xe9ter la phrase \xab Quand John et Mary sont all\xe9s au magasin, John a donn\xe9 une bouteille \xe0 _ \xbb (connue sous le nom de t\xe2che d'Identification d'Objet Indirect (IOI)). D'apr\xe8s ([Conmy et al., 2023](https://arxiv.org/abs/2304.14997))."}),(0,s.jsxs)(n.p,{children:["L'activation patching a \xe9t\xe9 utilis\xe9 pour trouver des circuits pour diverses t\xe2ches (",(0,s.jsx)(n.a,{href:"https://openreview.net/forum?id=NpsVSN6o4ul",children:"Wang et al., 2023"}),") dans les LLM, notamment :"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Exemple de prompt :"}),' "Quand Jean et Marie sont all\xe9s au magasin, Jean a donn\xe9 une bouteille \xe0"']}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Compl\xe9tion :"}),' "Marie"']}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"T\xe2che :"})," Identification de l'Objet Indirect (IOI) (",(0,s.jsx)(n.a,{href:"https://openreview.net/forum?id=NpsVSN6o4ul",children:"Wang et al., 2023"}),")"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Exemple de prompt :"}),' "La guerre a dur\xe9 de 1517 \xe0 15"']}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Compl\xe9tion :"})," n'importe quel nombre \xe0 deux chiffres sup\xe9rieur \xe0 17"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"T\xe2che :"})," Plus-Grand-Que (",(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2305.00586",children:"Hanna et al., 2023"}),")"]}),(0,s.jsx)(l.A,{src:"./img/Og6_Image_24.png",alt:"Saisir la description alternative de l'image",number:"24",label:"9.24",caption:"Exemple d'invite : \u201cLa guerre a dur\xe9 de 1517 \xe0 15\u201d , Compl\xe9tion : \u201c fichiers\u201d , T\xe2che : Docstring ([Heimersheim & Janiak, 2023](https://www.alignmentforum.org/posts/u6KXXmKFbXfWzoAXn/a-circuit-for-python-docstrings-in-a-4-layer-attention-only)). Le mod\xe8le pr\xe9dit le prochain jeton, qui devrait \xeatre une copie du prochain argument dans la d\xe9finition."}),(0,s.jsxs)(n.p,{children:["Il existe de nombreux param\xe8tres d'activation patching, comme d\xe9taill\xe9 dans (",(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2309.16042",children:"Zhang & Nanda, 2023"}),"). L'activation patching peut \xeatre appliqu\xe9 \xe0 diff\xe9rents niveaux de granularit\xe9, allant du patching du flux r\xe9siduel entier \xe0 une couche particuli\xe8re au patching de positions de tokens sp\xe9cifiques dans le mod\xe8le."]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"L'activation patching n'explique pas le mod\xe8le de mani\xe8re totalement causale :"})," il aide \xe0 identifier quels composants sont impliqu\xe9s dans certains comportements, mais il ne clarifie pas toujours comment ces composants interagissent ou contribuent causalement au comportement global. Savoir qu'un neurone particulier ou une t\xeate d'",(0,s.jsx)(t,{term:"attention",definition:'{"definition":"M\xe9canisme permettant aux mod\xe8les de se concentrer sur les parties pertinentes de l\'entr\xe9e lors de la r\xe9alisation de pr\xe9dictions, en calculant des combinaisons pond\xe9r\xe9es d\'\xe9l\xe9ments d\'entr\xe9e..","source":"[Bahdanau et al., 2015](https://arxiv.org/abs/1409.0473)","aliases":["Attention","attention mechanism","self-attention"]}',children:(0,s.jsx)(t,{term:"attention",definition:'{"definition":"M\xe9canisme permettant aux mod\xe8les de se concentrer sur les parties pertinentes de l\'entr\xe9e lors de la r\xe9alisation de pr\xe9dictions, en calculant des combinaisons pond\xe9r\xe9es d\'\xe9l\xe9ments d\'entr\xe9e..","source":"[Bahdanau et al., 2015](https://arxiv.org/abs/1409.0473)","aliases":["Attention","attention mechanism","self-attention"]}',children:"attention"})})," est impliqu\xe9 ne signifie pas n\xe9cessairement que nous comprenons son r\xf4le sp\xe9cifique dans le processus de prise de d\xe9cision du mod\xe8le. La m\xe9thode est d\xe9pendante du contexte, ce qui signifie que les composants critiques pour une t\xe2che peuvent ne pas se g\xe9n\xe9raliser \xe0 d'autres. De plus, il existe un compromis en termes de granularit\xe9 : les patches plus fins capturent plus de d\xe9tails mais peuvent manquer des interactions plus larges, tandis que les patches plus grossiers risquent de n\xe9gliger des \xe9l\xe9ments importants. De plus, \xe0 mesure que les mod\xe8les grandissent, la complexit\xe9 et le co\xfbt computationnel de l'utilisation de l'activation patching augmentent, rendant plus difficile l'isolation de circuits significatifs."]}),"\n",(0,s.jsx)(n.h2,{id:"02",children:"Pilotage des activations"}),"\n",(0,s.jsxs)(n.p,{children:["Le pilotage des activations est une technique utilis\xe9e pour contr\xf4ler le comportement d'un mod\xe8le en modifiant ses activations pendant l'inf\xe9rence. Contrairement aux m\xe9thodes traditionnelles comme le ",(0,s.jsx)(t,{term:"fine-tuning",definition:'{"definition":"Processus consistant \xe0 prendre un mod\xe8le pr\xe9-entra\xeen\xe9 et \xe0 le perfectionner pour une t\xe2che ou un ensemble de donn\xe9es sp\xe9cifique..","source":"","aliases":["Fine-tuning","fine-tune","finetuning","finetune","affinage","Affinage"]}',children:(0,s.jsx)(t,{term:"fine-tuning",definition:'{"definition":"Processus consistant \xe0 prendre un mod\xe8le pr\xe9-entra\xeen\xe9 et \xe0 le perfectionner pour une t\xe2che ou un ensemble de donn\xe9es sp\xe9cifique..","source":"","aliases":["Fine-tuning","fine-tune","finetuning","finetune","affinage","Affinage"]}',children:"fine-tuning"})})," ou le RLHF, le pilotage des activations permet une intervention directe sans avoir besoin de r\xe9entra\xeener le mod\xe8le."]}),"\n",(0,s.jsxs)(n.p,{children:["Voici un exemple o\xf9 le pilotage des activations a \xe9t\xe9 utilis\xe9 pour forcer GPT-2 \xe0 parler de sujets li\xe9s \xe0 l'amour, ind\xe9pendamment du contexte pr\xe9c\xe9dent (",(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2308.10248",children:"Turner et al., 2023"}),") :"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Compl\xe9tion par d\xe9faut de GPT-2 :"})," Je te d\xe9teste parce que... -> tu es la chose la plus d\xe9go\xfbtante que j'aie jamais vue."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:'GPT-2 orient\xe9 vers la direction "amour" :'})," Je te d\xe9teste parce que... -> tu es si belle et je veux \xeatre avec toi pour toujours."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Le pilotage des activations peut \xeatre utilis\xe9 pour r\xe9soudre les probl\xe8mes restants apr\xe8s l'entra\xeenement \xe0 la s\xe9curit\xe9 et le ",(0,s.jsx)(t,{term:"fine-tuning",definition:'{"definition":"Processus consistant \xe0 prendre un mod\xe8le pr\xe9-entra\xeen\xe9 et \xe0 le perfectionner pour une t\xe2che ou un ensemble de donn\xe9es sp\xe9cifique..","source":"","aliases":["Fine-tuning","fine-tune","finetuning","finetune","affinage","Affinage"]}',children:(0,s.jsx)(t,{term:"fine-tuning",definition:'{"definition":"Processus consistant \xe0 prendre un mod\xe8le pr\xe9-entra\xeen\xe9 et \xe0 le perfectionner pour une t\xe2che ou un ensemble de donn\xe9es sp\xe9cifique..","source":"","aliases":["Fine-tuning","fine-tune","finetuning","finetune","affinage","Affinage"]}',children:"fine-tuning"})})," en :"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Orientant les mod\xe8les vers des r\xe9sultats souhaitables :"})," Am\xe9liorer la v\xe9racit\xe9 (",(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2306.03341",children:"Li et al., 2023"}),"), l'honn\xeatet\xe9 (",(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2310.01405",children:"Zou et al., 2023"}),"), \xe9viter de g\xe9n\xe9rer du contenu toxique ou nuisible, personnaliser les personnalit\xe9s des chatbots (par exemple, les rendre plus formels ou amicaux), ou orienter dans le style d'auteurs sp\xe9cifiques sans r\xe9entra\xeener le mod\xe8le."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Contr\xf4le post-d\xe9ploiement :"})," Surveiller les syst\xe8mes d'IA pour d\xe9tecter les comportements dangereux et am\xe9liorer la robustesse face aux contournements en orientant les mod\xe8les \xe0 refuser les demandes nuisibles (",(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2310.01405",children:"Zou et al., 2023"}),"). Il pourrait \xe9galement \xeatre possible de renforcer d'autres techniques de s\xe9curit\xe9, comme l'IA Constitutionnelle, en examinant comment elles encouragent le mod\xe8le vers un comportement plus s\xfbr et plus honn\xeate, ainsi qu'en identifiant les lacunes dans ce processus (",(0,s.jsx)(n.a,{href:"https://www.anthropic.com/news/mapping-mind-language-model",children:"Anthropic, 2024"}),")."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(a.A,{type:"youtube",videoId:"CJIbCV92d88",number:"4",label:"9.4",caption:"Un deuxi\xe8me exemple de pilotage sur Claude 3 Sonnet utilisant des caract\xe9ristiques d'auto-encodeur parcimonieux. Apprentissage de dictionnaire sur Claude 3 Sonnet"}),"\n",(0,s.jsxs)(n.p,{children:["Notez que l'agenda d'Ing\xe9nierie des Repr\xe9sentations (",(0,s.jsx)(n.a,{href:"https://arxiv.org/abs/2310.01405",children:"Zou et al., 2023"}),") est une variante du pilotage des activations qui propose d'orienter les LLM vers des r\xe9sultats souhaitables tels qu'une plus grande honn\xeatet\xe9, moins de biais, etc."]}),"\n",(0,s.jsxs)(o.A,{title:"D\xe9tails - Pilotage de l'activation",collapsed:!0,children:[(0,s.jsx)(n.p,{children:"Le pilotage des activations implique deux \xe9tapes principales. Disons que nous voulons rendre notre mod\xe8le plus honn\xeate, cela implique deux \xe9tapes principales :"}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Identifier la direction de l'honn\xeatet\xe9 dans l'espace d'activation du mod\xe8le."})," Cela se fait g\xe9n\xe9ralement en collectant les activations du mod\xe8le pour des prompts con\xe7us pour susciter des comportements contrast\xe9s (par exemple, des r\xe9ponses \"honn\xeates\" vs \"malhonn\xeates\") et en les analysant pour trouver une direction lin\xe9aire qui s\xe9pare les deux. Les activations du mod\xe8le peuvent \xeatre consid\xe9r\xe9es comme des vecteurs dans un espace de haute dimension. Certaines directions dans cet espace correspondent \xe0 des comportements sp\xe9cifiques. Par exemple, une direction pourrait corr\xe9ler avec la g\xe9n\xe9ration de texte plus positif, tandis qu'une autre pourrait orienter le mod\xe8le \xe0 parler de science. Cette direction, parfois appel\xe9e vecteur conceptuel, repr\xe9sente l'attribut cibl\xe9 dans l'espace d'activation."]}),(0,s.jsx)(l.A,{src:"./img/jGl_Image_25.png",alt:"Entrer la description alternative de l'image",number:"25",label:"9.25",caption:"Identification d'une direction de pilotage d'activation. D'apr\xe8s ([Wehner, 2024](https://www.alignmentforum.org/posts/3ghj8EuKzwD3MQR5G/an-introduction-to-representation-engineering-an-activation))."}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"La deuxi\xe8me \xe9tape consiste \xe0 piloter le comportement du mod\xe8le en ajoutant ce vecteur conceptuel aux activations du mod\xe8le lors de l'inf\xe9rence."})," En introduisant ce vecteur \xe0 une couche pertinente, nous pouvons amplifier ou supprimer certains comportements sans r\xe9entra\xeener le mod\xe8le. Par exemple, ajouter le vecteur \"honn\xeatet\xe9\" aux activations d'un mod\xe8le pendant l'inf\xe9rence le pousse \xe0 g\xe9n\xe9rer des r\xe9ponses plus honn\xeates."]}),(0,s.jsx)(l.A,{src:"./img/KCw_Image_26.png",alt:"Entrer la description alternative de l'image",number:"26",label:"9.26",caption:"Le vecteur conceptuel est ajout\xe9 aux activations \xe0 une couche sp\xe9cifique pour influencer le comportement du mod\xe8le dans la direction souhait\xe9e. D'apr\xe8s ([Wehner, 2024](https://www.alignmentforum.org/posts/3ghj8EuKzwD3MQR5G/an-introduction-to-representation-engineering-an-activation))."}),(0,s.jsx)(n.p,{children:"Le vecteur conceptuel peut \xe9galement \xeatre obtenu en utilisant une sonde lin\xe9aire (voir la section sur les Classificateurs de Sondage), ou peut \xeatre une caract\xe9ristique trouv\xe9e par apprentissage de dictionnaire (voir la section sur les Auto-encodeurs Parcimonieux) comme montr\xe9 dans la vid\xe9o Claude 3 Sonnet ci-dessus."})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}},3931:(e,n,t)=>{t.d(n,{A:()=>l});var i=t(6540),s=t(6347),r=t(8444);const a={videoFigure:"videoFigure_dV9u",fullWidth:"fullWidth_Tv7O",videoContainer:"videoContainer_LWoK",aspectRatio169:"aspectRatio169_Go8b",aspectRatio43:"aspectRatio43_b3T7",aspectRatio11:"aspectRatio11_n21J",aspectRatio219:"aspectRatio219_L_3n",videoIframe:"videoIframe_QEc5",videoElement:"videoElement_uu7N",customPlayer:"customPlayer_jiC4",customPlayerPlaceholder:"customPlayerPlaceholder_aL9q",loadingOverlay:"loadingOverlay_e2pu",spinner:"spinner_tFyL",spin:"spin_saPs",errorContainer:"errorContainer_J6Pn",errorIcon:"errorIcon_cGdn",fallbackLink:"fallbackLink_WsZk"};var o=t(4848);function l(e){let{type:n="youtube",videoId:t,caption:l,title:d,startTime:c,autoplay:u=!1,controls:p=!0,aspectRatio:m="16:9",width:h,height:g,chapter:f,number:x,label:v,useCustomPlayer:j=!1,fullWidth:b=!0}=e;const[q,y]=(0,i.useState)(!0),[w,_]=(0,i.useState)(!1),L=(0,s.zy)(),M=f||(()=>{const e=L.pathname.match(/\/chapters\/(\d+)/);return e?parseInt(e[1]):null})(),P=(()=>{const e=(e=>{if(!e)return"";if("number"==typeof e)return e.toString();if("string"==typeof e){if(/^\d+$/.test(e))return e;let n=0;const t=e.match(/(\d+)h/),i=e.match(/(\d+)m/),s=e.match(/(\d+)s/);return t&&(n+=3600*parseInt(t[1])),i&&(n+=60*parseInt(i[1])),s&&(n+=parseInt(s[1])),n>0?n.toString():""}return""})(c);switch(n.toLowerCase()){case"youtube":let i=`https://www.youtube.com/embed/${t}`;const s=new URLSearchParams;e&&s.append("start",e),u&&s.append("autoplay","1"),p||j||s.append("controls","0"),s.append("rel","0"),s.append("modestbranding","1"),s.append("fs","1"),s.append("cc_load_policy","0"),s.append("iv_load_policy","3"),s.append("showinfo","0"),s.append("disablekb","1"),s.append("playsinline","1"),s.append("color","white"),s.append("theme","light"),j&&(s.append("enablejsapi","1"),s.append("origin",window.location.origin));const r=s.toString();return r?`${i}?${r}`:i;case"vimeo":let a=`https://player.vimeo.com/video/${t}`;const o=new URLSearchParams;u&&o.append("autoplay","1"),p||j||o.append("controls","0"),o.append("title","0"),o.append("byline","0"),o.append("portrait","0"),o.append("dnt","1"),o.append("transparent","0"),o.append("background","1");const l=o.toString();return l?`${a}?${l}`:a;case"mp4":case"webm":case"video":return t;default:return console.warn(`Unsupported video type: ${n}`),t}})(),C=()=>{y(!1)},I=()=>{_(!0),y(!1)},A=e=>{let{src:t,onLoad:i,onError:s}=e;return(0,o.jsx)("div",{className:a.customPlayer,children:(0,o.jsxs)("div",{className:a.customPlayerPlaceholder,children:[(0,o.jsx)("h3",{children:"Atlas Custom Player"}),(0,o.jsx)("p",{children:"Coming Soon"}),(0,o.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:a.fallbackLink,children:["Watch on ",n.charAt(0).toUpperCase()+n.slice(1)]})]})})},k=["mp4","webm","video"].includes(n.toLowerCase());return(0,o.jsxs)("figure",{className:`${a.videoFigure} ${b?a.fullWidth:""}`,children:[(0,o.jsxs)("div",{className:`${a.videoContainer} ${(()=>{switch(m){case"4:3":return a.aspectRatio43;case"1:1":return a.aspectRatio11;case"21:9":return a.aspectRatio219;default:return a.aspectRatio169}})()}`,style:{width:b?"100%":h||"auto",maxWidth:b?"none":"800px"},children:[q&&!w&&(0,o.jsxs)("div",{className:a.loadingOverlay,children:[(0,o.jsx)("div",{className:a.spinner}),(0,o.jsx)("p",{children:"Loading video..."})]}),w&&(0,o.jsxs)("div",{className:a.errorContainer,children:[(0,o.jsxs)("svg",{className:a.errorIcon,width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,o.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,o.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),(0,o.jsx)("h4",{children:"Failed to load video"}),(0,o.jsxs)("p",{children:["Video type: ",n]}),(0,o.jsxs)("p",{children:["Video ID/URL: ",t]}),(0,o.jsx)("a",{href:P,target:"_blank",rel:"noopener noreferrer",className:a.fallbackLink,children:"Try opening video directly"})]}),!w&&(k?(0,o.jsxs)("video",{className:a.videoElement,controls:p,autoPlay:u,onLoadedData:C,onError:I,title:d||l||`${n} video`,style:{width:h||"100%",height:g||"auto",display:q?"none":"block"},children:[(0,o.jsx)("source",{src:P,type:`video/${n}`}),(0,o.jsxs)("p",{children:["Your browser doesn't support video playback.",(0,o.jsx)("a",{href:P,target:"_blank",rel:"noopener noreferrer",children:"Download the video file"})]})]}):j?(0,o.jsx)(A,{src:P,onLoad:C,onError:I}):(0,o.jsx)("iframe",{className:a.videoIframe,src:P,title:d||l||`${n} video`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,onLoad:C,onError:I,style:{width:h||"100%",height:g||"100%",opacity:q?0:1}}))]}),(0,o.jsx)(r.A,{caption:l,mediaType:"video",chapter:M,number:x,label:v})]})}}}]);